# 热更

## 热更流程

![1671371236632](C:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\1671371236632.png)

### 准备阶段

1. 记录版本号，MD5码以及资源大小。生成位唯一key值作为包名。可以使用Xml记录包名(ab包)。
2. 编写或使用工具，把ab包 内的资源通过md5码进行比对，筛选出需要热更的资源。
3. 通过热更资源生成当前热更包的资源配置表。然后将热更的配置表与服务器的配置表进行整合。(服务器)
4. 进入客户端后，下载服务器资源配置表，与本地配置表进行对比(客户端)
5. 需要热更的情况下，下载热更资源。资源下载后需要做校验，防止服务器上没有这个资源或下载错误。
6. 资源校验失败，则重新请求下载。PS:可能会进入热更死循环，需要做次数限制。
7. 文件校验正确，则进行热更包的加载。先进行文件解压，后解密。
8. 加密流程在打包过程中进行。