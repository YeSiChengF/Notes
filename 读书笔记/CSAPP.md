# CSAPP

## 第一章 计算机系统漫游

### 1.1 信息就是位+上下文

由ASCII字符构成的文件称为文本文件，其他文件都称为二进制文件。

在不同的上下文中，一个同样的字节序列可能表示一个整数、浮点数、字符串或机器指令。

### 1.2程序被其他程序翻译成不同格式

一个c语言程序可以被编译器编译至不同格式运行于不同的平台

c语言程序的翻译过程分为四个阶段

1. 预处理器

   预处理器读取c程序中引用的头文件，然后插入到程序文本中生成新的c语言文件

2. 编译阶段

   编译器把c语言文件编译成汇编语言程序

3. 汇编阶段

   汇编器把汇编语言程序翻译成机器语言

4. 链接阶段

   链接器负责将已经编译好的文件合并到所需要的程序中，合并后得到可执行文件

### 1.3了解编译系统如何工作是大有益处的

编译的结果很重要，所以了解如何编译以及编译的流程很重要。

- 优化程序性能
  - 编译出来的内存大小
  - 程序运行的速度
  - 程序运行时的内存占用
- 理解链接时出现的错误
- 避免安全漏洞
  - 避免堆栈溢出

### 1.4处理器读并解释存储在内存中的指令

#### 1.4.1系统的硬件组成

1. 总线

   各个硬件中传输数据的桥梁，传输定长的字节块，也就是字。一个字是一个基本的系统参数，也就是一次传输的最大数量。一般为4个字节或8个字节（也就是32位和64位）

2. I/O设备

   输入和输出设备是与外界的接口。每个I/O设备都通过一个控制器或适配器与IO总线相连。控制器是在I/O设备上或主板上的芯片组，适配器则是硬件扩展。

3. 主存储器

   物理上是一组动态随机存取存储器芯片组成。逻辑上则是一个线性的字节数组。每个字节都有唯一的地址。

4. 处理器

   在任何时刻，PC都指向主存中的某条机器语言指令。

   从通电开始到断电结束，处理器一直在不断地执行程序计数器指向的指令，再更新程序计数器来指向下一条指令。（与图灵机不同的是下一条指令地址不一定相邻）

   指令执行的过程：

   - 加载

     从主存复制一个字节或一个字到寄存器，覆盖原有内容。

   - 存储

     从寄存器复制一个字或一个字节到主存，覆盖原有内容。

   - 操作

     把两个寄存器的内容复制到ALU做算术运算，并将结果放到一个寄存器中，覆盖原有内容。

   - 跳转

     从指令本身抽取一个字，并将这个字复制到程序计数器中，覆盖原有内容。

